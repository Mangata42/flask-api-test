# flask-api test

  

## Dependencies

The application has only been tested on MacOSX High-Sierra, but it should perfectly work on other Unix-based systems like Ubuntu.
For Windows, check online documentation to see how to create a Python Virtual Environment.

>Note: To run the application, make sure Python3 and PIP are installed on your system.

Just to be sure, run `pip install -r upgrade pip`

  

## Installation

As I know that developers are lazy, the installation has been simplified. Go to the root of the project folder, and run

`source installation.sh`

As mentionned earlier, Python3 and PIP must be installed on your system.
This script creates a Python Virtual Environment called `virtual_env`, activates it and installs all the dependencies required as listed in `requirements.txt`. Then, it initialises the database and populates it with tables specified in the `migration` folder.
It also sets an environment variable `FLASK_APP=main.py` which is used by Flask framework to define the application entry point.
The application is ready to work!

  

## Using the application

The application works in a local server generated by the Flask framework. By default, it's not reachable outside of http://127.0.0.1:5000 (or http://localhost:5000) which is your local machine IP address.

To launch the server, run

`flask run`

If you want to make it accessible from other devices (which must be connected to the same network), run

`python3 main.py`

The server will now listen to all incoming connections from your machine subdomain IP, for example http://192.168.6:5000

That is the URL you should be using if you want to call the server from another device.

>Note: From now on, I will assume that the server is set to run locally.

<h3>Within the Website</h3>

Open your favourite Internet Browser and go to http://localhost:5000
The functionalities should be very intuitive. As a matter of fact, the Website is simply a more convenient way to display the skills that are in the database, but also to add, delete, or edit them. By default, the website representation is not using the API system built inside the application, although some of the API functionalities can be used.

>http://localhost:5000/api/skills
>or
>http://localhost:5000/json_all
>Will return a JSON of all the skills entries in the database

>http://localhost:5000/api/skill/{id}
>or
>http://localhost:5000/json/{id}
>Will return a JSON of the skill entry defined by the {id} parameter (starting from 1)

<h3>With HTTPie </h3>

**HTTPie** is a tool made to craft HTTP requests to a server. It has been installed with the installation script. That is the tool I will be using to send requests to the API. 
The API handles four HTTP requests, which are **GET**, **POST**, **PUT** and **DELETE**. 
Each request with HTTPie must be done in the following form:
>http {GET, POST etc} http://localhost:5000/api/{something}

The server will then return a response.

 - GET  / asks data from server

>http GET http://localhost:5000/api/skill/{id}
>Will return a JSON or 404 if ID points to None

>http GET http://localhost:5000/api/skills
>Will return a JSON

 - POST / send data to server
 For each request, you must specify `attribute={skill name}` at the end of the URL where `{skill name}` will be the skill you want to add in the database.
 >http POST http://localhost:5000/api/skills attribute=html
 >Will create a new entry to database and return the JSON
 
 
 - PUT / edit data in server database
 As for POST, you must specify an attribute.
 >http PUT http://localhost:5000/api/skill/{id} attribute=css
 >Will edit the entry pointed by {id} and return the JSON

 - DELETE / delete data in server database
 >http DELETE http://localhost:5000/api/skill/{id}
 >Will delete the entry pointed by {id} and return a message confirmation

>http DELETE http://localhost:5000/api/skills
>Will delete all database

At every moment, you can check the database status on the local website.

## Errors management

The application handles errors such as adding `/add` or `/edit` at the end of the URL. The API will also return a user-friendly JSON message if requests are not made properly.
All entries in the database are stored in lowercase, so HTML will be the same as html. Also, all white spaces are trimmed. 

## Uninstall

`deactivate`
`rm -rf {application folder}`